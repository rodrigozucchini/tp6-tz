@page
@model tp6_torres_zucchini.Pages.User.PedidosModel

<h2>Pedidos</h2>
<p>Bienvenido a la sección de pedidos.</p>
<p>ID CLIENTE: @Model.idCliente - ID CONEXION: @Model.ConexionId</p>


<form method="post" asp-page-handler="Desconectar">
    <div class="mt-3">
        <input type="submit" value="Desconectar" class="btn btn-primary" />
    </div>
</form>
<form method="post" asp-page-handler="GenerarPedido">
    <div class="mt-3">
        <input type="submit" value="Generar Pedido" class="btn btn-success" />
    </div>
</form>

@if (!string.IsNullOrEmpty(Model.MensajePedido))
{
    <div class="alert alert-info mt-3">
        @Model.MensajePedido
    </div>
}

<h3>Consultar Estado de Pedido</h3>

<form method="post" asp-page-handler="ConsultarEstadoPedido">
    <div class="form-group">
        <label for="ConexionId">ID de Conexión:</label>
        <input type="number" id="ConexionId" name="ConexionId" class="form-control" required />
    </div>

    <div class="form-group mt-2">
        <label for="PedidoId">Número de Pedido:</label>
        <input type="number" id="PedidoId" name="PedidoId" class="form-control" required />
    </div>

    <div class="mt-3">
        <input type="submit" value="Buscar Estado" class="btn btn-info" />
    </div>
</form>

@if (!string.IsNullOrEmpty(Model.EstadoPedido))
{
    <div class="alert alert-success mt-3">
        Estado del Pedido: <strong>@Model.EstadoPedido</strong>
    </div>
}

@if (!string.IsNullOrEmpty(Model.ErrorEstadoPedido))
{
    <div class="alert alert-danger mt-3">
        @Model.ErrorEstadoPedido
    </div>
}


<h3>Cambiar Estado de Pedido</h3>
<form method="post" asp-page-handler="CambiarEstadoPedido">
    <div class="form-group">
        <label for="ConexionId">ID de Conexión:</label>
        <input type="number" id="ConexionId" name="ConexionId" class="form-control" required />
    </div>

    <div class="form-group mt-2">
        <label for="PedidoId">Número de Pedido:</label>
        <input type="number" id="PedidoId" name="PedidoId" class="form-control" required />
    </div>

    <div class="form-group mt-2">
        <label for="NuevoEstado">Nuevo Estado:</label>
        <select id="NuevoEstado" name="NuevoEstado" class="form-control" required>
            <option value="DESPACHADO">DESPACHADO</option>
            <option value="ENTREGADO">ENTREGADO</option>
            <option value="CERRADO">CERRADO</option>
            <option value="ANULADO">ANULADO</option>
        </select>
    </div>

    <div class="mt-3">
        <input type="submit" value="Cambiar Estado" class="btn btn-warning" />
    </div>
</form>

@if (!string.IsNullOrEmpty(Model.MensajeCambioEstado))
{
    <div class="alert alert-info mt-3">
        @Model.MensajeCambioEstado
    </div>
}